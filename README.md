# Автомобиль на сайте

Автомобили состоят из основной информации о документе, а также дополнительных полей.
Заголовок страницы генерируется при внесении изменений в админ понели по шаблону:
**\*Марка\* \*Модель\*, \*Год выпуска\* г.** (Audi S8, 2020 г.)

## Страница

### Таблица #1: **modx_site_content**

| Поле                  | Описание                                     | Установить значение |
| --------------------- | -------------------------------------------- | ------------------- |
| id                    | Уникальный номер страницы                    | -                   |
| type                  | тип страницы                                 | document            |
| contentType           | -                                            | text/html           |
| pagetitle             | **\*Марка\* \*Модель\*, \*Год выпуска\* г.** | -                   |
| alias                 | url страницы                                 | -                   |
| alias_visible         | -                                            | 1                   |
| content               | -                                            | [[!parseCars]]      |
| template              | -                                            | 3                   |
| published             | -                                            | 1                   |
| pub_date              | -                                            | 0                   |
| unpub_date            | -                                            | 0                   |
| parent                | -                                            | 2                   |
| isfolder              | -                                            | 0                   |
| richtext              | -                                            | 1                   |
| menuindex             | -                                            | 0                   |
| searchable            | -                                            | 1                   |
| cacheable             | -                                            | 1                   |
| createdby             | -                                            | 1                   |
| createdon             | Дата создания в UNIX-time                    | -                   |
| createdby             | -                                            | 1                   |
| editedby              | -                                            | 1                   |
| editedon              | Дата последнего редактирования в UNIX-time   | -                   |
| deleted               | -                                            | 0                   |
| deletedon             | -                                            | 0                   |
| deletedon             | -                                            | 0                   |
| deletedby             | -                                            | 0                   |
| publishedon           | Дата публикации в UNIX-time                  | -                   |
| publishedby           | -                                            | 1                   |
| menutitle             | -                                            | Оставить пустым     |
| donthit               | -                                            | 0                   |
| privateweb            | -                                            | 0                   |
| privatemgr            | -                                            | 0                   |
| content_dispo         | -                                            | 0                   |
| hidemenu              | -                                            | 0                   |
| class_key             | -                                            | modDocument         |
| context_key           | -                                            | web                 |
| content_type          | -                                            | 1                   |
| uri                   | -                                            | Оставить пустым     |
| uri_override          | -                                            | 0                   |
| hide_children_in_tree | -                                            | 0                   |
| show_in_tree          | -                                            | 0                   |
| properties            | -                                            | NUL                 |

### Таблица #2: **modx_site_tmplvar_contentvalues**

| Поле      | Описание                                      |
| --------- | --------------------------------------------- |
| id        | уникальный id значени доп. поля               |
| contentid | id автомобиля, к которому относится доп. поле |
| tmplvarid | id доп. поля (расшифровка в таблице #3)       |
| value     | значение доп. поля (расшифровка в таблице #3) |

#### Таблица #3: расшиврока доп. полей

| id  | Поле                      | Описание                                                                    |
| --- | ------------------------- | --------------------------------------------------------------------------- |
| 26  | Галерея                   | Пример заполнения с комментариями ниже                                      |
| 27  | Марка                     |                                                                             |
| 30  | Модель                    |                                                                             |
| 31  | Год выпуска               |                                                                             |
| 28  | Цена                      |                                                                             |
| 52  | Цена со скидкой           |                                                                             |
| 52  | Цена со скидкой           |                                                                             |
| 33  | Пробег                    |                                                                             |
| 34  | Кузов                     | Седан:1 Хэтчбэк:2 Лифтбэк:3 Универсал:4 Кроссовер:5 Внедорожник:6 Купе:7    |
| 35  | Цвет                      | Черный:1, Серебристый:2, Белый:3, Серый:4, Синий:5, Красный:6,              |
|     |                           | Зеленый:7, Коричневый:8, Бежевый:9,Голубой:10, Золотистый:11, Пурпурный:12, |
|     |                           | Фиолетовый:13, Жёлтый:14, Оранжевый:15, Розовый:16                          |
| 36  | Двигатель                 | Бензин:1, Дизель:2, Гибрид:3, Электро:4                                     |
| 37  | Объем двигателя           |                                                                             |
| 38  | Коробка передач           | Механическая:1 Автомат:2 Робот:3 Вариатор:4                                 |
| 39  | Руль                      | Левый:1, Правый:2                                                           |
| 40  | Привод                    | Передний:1, Задний:2, Полный:3                                              |
| 41  | Мощность двигателя (л.с.) |                                                                             |
| 42  | Владельцев                |                                                                             |
| 44  | Комплектация              | Пример заполнения с комментариями ниже. Значение полей                      |
|     |                           | **MIGX_id,title** не менять и брать из шаблона                              |
| 45  | Описание                  | Текстовое описание авто                                                     |
| 46  | Документы                 | JSON массив файлов, пример заполнени ниже                                   |
| 33  | Расположение              | Энгельс: 1, Саратов: 2                                                      |

**Галерея — id: 26**

Пример заполненного поля:

```JSON
[
  {
    "MIGX_id":"1", // Уникальный номер фото/видео
    "photo":"img\/models\/model-1.jpg", // Ссылка на фото
    "yt-link":"" // Ссылка на видео с Youtube. Поле не обязательно, если заполнено — в галерее появляется видео
  },{
    "MIGX_id":"2",
    "photo":"img\/card\/car-3.jpg",
    "yt-link":""
  },{
    "MIGX_id":"3",
    "photo":"img\/main\/4.jpg",
    "yt-link":"https:\/\/www.youtube.com\/embed\/UGapN-hrekw"
  }
]
```

**Комплектация — id: 44**

Шаблон:

```JSON
[
  {
    "MIGX_id": 0,
    "title": "Обзор",
    "options": ""
  },
  { "MIGX_id": 1,
    "title": "Элементы экстерьера",
    "options": ""
  }, {
    "MIGX_id": 2,
    "title": "Защита от угона",
    "options": ""
  }, {
    "MIGX_id": 3,
    "title": "Мультимедиа",
    "options": ""
  }, {
    "MIGX_id": 4,
    "title": "Салон",
    "options": ""
  }, {
    "MIGX_id": 5,
    "title": "Комфорт",
    "options": ""
  }, {
    "MIGX_id": 6,
    "title": "Безопасность",
    "options": ""
  },{
    "MIGX_id": 7,
    "title": "Прочее",
    "options": ""
  }
]
```

Пример заполненного поля:

```JSON
[
  {
    "MIGX_id": 0,
    "title": "Обзор",
    "options":
      "Ксеноновые/Биксеноновые фары,Электрообогрев боковых зеркал,Дневные ходовые огни,Противотуманные фары,Система адаптивного освещения,Система управления дальним светом,Датчик света"
  },
  { "MIGX_id": 1,
    "title": "Элементы экстерьера",
    "options": "Легкосплавные диски,Диски 20"
  }, {
    "MIGX_id": 2,
    "title": "Защита от угона",
    "options": "Сигнализация,Центральный замок,Иммобилайзер"
  }, {
    "MIGX_id": 3,
    "title": "Мультимедиа",
    "options": "Аудиосистема,AUX,Bluetooth,USB,Навигационная система,Розетка 12V"
  }, {
    "MIGX_id": 4,
    "title": "Салон",
    "options":
      "Количество мест: 5,Ткань,Тёмный,Сиденья водителя,Сиденье водителя с поясничной поддержкой,Подогрев передних сидений,Отделка кожей рычага КПП,Передний центральный подлокотник,Третий задний подголовник"
  }, {
    "MIGX_id": 5,
    "title": "Комфорт",
    "options":
      "Электростеклоподъёмники передние,Электростеклоподъёмники задние,Кондиционер,Климат-контроль 2-зонный,По высоте,По вылету,Парктроник задний,Камера,Дистанционный запуск двигателя,Электропривод зеркал,Охлаждаемый перчаточный ящик,Прикуриватель и пепельница"
  }, {
    "MIGX_id": 6,
    "title": "Безопасность",
    "options":
      "Водителя,Пассажира,Боковые задние,Оконные (шторки),Задний ряд,Антиблокировочная система (ABS),Система стабилизации (ESP),ЭРА-ГЛОНАСС"
  },{
    "MIGX_id": 7,
    "title": "Прочее",
    "options": "полноразмерное запасное колесо,Защита картера"
  }
]
```

**Докумены — id: 46**

```JSON
[
  {
    "MIGX_id":"1",
    "file":"img\/card\/car-1.jpg", // Ссылка
    "title":"\u0424\u043e\u0442\u043e \u043c\u0430\u0448\u0438\u043d\u044b" // Название документа
  },{
    "MIGX_id":"2",
    "file":"img\/card\/car-1.jpg",
    "title":"\u0412\u0442\u043e\u0440\u043e\u0435 \u0444\u043e\u0442\u043e"
  }
]
```
